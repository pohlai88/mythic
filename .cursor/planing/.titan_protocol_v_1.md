# Titan Protocol v1.0 — Derivation Map (Constitution → Gates)

**Status:** Ratified (MVP Defaults Annex Applied) **Derived From:**

- _LBOS Origin Paper (Sealed)_
- _NexusCanon Constitution v1.0 (Ratified)_
- _Expanded Conformance Test Suite (Executable Checklist)_
- _Amendment A-000 (Governance) + A-001 (Courts by Office) (Ratified)_

**Purpose:** Convert constitutional law into **enforceable gates** that operate
across the development lifecycle. Titan is the **Execution Court’s enforcement
engine**.

**Non-Doctrine Rule:** Titan introduces **no new doctrine**. Titan is pure
enforcement and operationalization.

---

## 0. Titan Protocol Principles

1. **Law → Gate:** Every constitutional clause SHALL have at least one gate.
2. **Fail Closed:** Any gate failure results in **VETO** unless an Amendment
   exists that explicitly permits an exception.
3. **Layered Enforcement:**
   - **Static Gates** (lint / compile-time)
   - **CI Gates** (pipeline checks / schema checks)
   - **Runtime Gates** (request-time / transaction-time enforcement)
   - **Audit Gates** (post-commit verification and reporting)
4. **Provenance:** Every veto MUST emit a ledger-ready record:
   - Gate ID, Clause ID, verdict, timestamp, actor, artifact
     (PR/commit/build/deploy), and reason.
5. **Escalation:** Vetoes resolve only through:
   - Fix → re-run gate → pass
   - OR propose Amendment per A-000

---

## 1. Gate Taxonomy and Severity

### 1.1 Gate Types

- **LINT** — static code/text rule
- **CI** — pipeline verification (tests, schema, policy, docs checks)
- **RUNTIME** — enforcement inside the authoritative write path
- **AUDIT** — post-commit verification (reports, alerts, integrity scans)

### 1.2 Severity

- **VETO (Hard)** — must fail the PR/build/deploy.
- **VETO (Soft / Reclassify)** — blocks merge into Constitution scope; may
  redirect to AXIS/Titan layers.
- **WARN** — allowed only if the Constitution explicitly permits variance (rare;
  must be logged).

---

## 2. Gate Failure Protocol (Court-Aware)

When a gate fails:

1. **Immediate Outcome:** PR/build/deploy is blocked (Hard veto) or reclassified
   (Soft veto).
2. **Attribution:** The system MUST display:
   - Clause ID
   - Gate ID
   - Reason
   - Suggested repair action
3. **Escalation Path:**
   - If dispute: submit to Courts in A-000 order:
     - Doctrine Court (traceability)
     - Integrity Court (conformance)
     - Execution Court (scope)
4. **Resolution:**
   - Fix and re-run gates
   - OR file Amendment proposal (A-000 lifecycle)

No bypass is permitted.

---

## 3. Clause → Gate Mapping (Derivation Map)

> Format:
>
> - **Clause**
> - **Gate IDs** (type + severity)
> - **Gate Intent**
> - **Typical Evidence** (what Titan checks)
> - **AXIS/Titan Interaction**

---

### Article I — Purpose and Telos

#### I.1 Digital Atelier Mandate

- **TITAN-LINT-I01 (VETO Soft):** “Throughput-only features without decision
  context”
  - **Intent:** Prevent product drift into pure throughput optimization.
  - **Evidence:** PRD/feature spec must include _Decision Context Fields_
    (intent/rationale).
  - **Interaction:** AXIS adds decision-capture UI; Titan validates presence in
    spec templates.

#### I.2 Judgment Supremacy

- **TITAN-CI-I02 (VETO Hard):** “High-impact actions require judgment capture”
  - **Intent:** Prevent auto-commit of irreversible decisions.
  - **Evidence:** Route/service method is annotated as high-impact → requires
    Decision Memory payload.
  - **Interaction:** AXIS provides confirmation + rationale; Titan enforces
    required payload in API.

---

### Article II — Timeless Accounting Truth

#### II.1 Precedence of Accounting Law

- **TITAN-CI-II01 (VETO Hard):** “Workflow must cite accounting primitive”
  - **Intent:** Ensure every workflow maps to an accounting truth.
  - **Evidence:** Spec includes Accounting Truth Citation (e.g., 3-Way Match /
    accrual / reversal).

#### II.2 Workflow Discovery

- **TITAN-LINT-II02 (VETO Hard):** “Feature-first workflow without accounting
  citation”
  - **Intent:** Prevent invented workflows.
  - **Evidence:** New workflow PRD missing Accounting Truth Citation field.

#### II.3 Compliance Variance

- **TITAN-RUNTIME-II03 (VETO Hard):** “Compliance posture may vary; truth may
  not”
  - **Intent:** Prevent changing truth under posture.
  - **Evidence:** Posture flag only changes friction/required fields; cannot
    change accounting invariants.

---

### Article III — Truth and Atomicity

#### III.1 Atomic Truth Requirement

- **TITAN-CI-III01 (VETO Hard):** “Atomic commit contract enforcement”
  - **Intent:** Ensure atomic unit is defined and committed as one verifiable
    act.
  - **Evidence:** Transaction boundary declared; payload includes provenance.
- **TITAN-AUDIT-III01 (VETO Hard):** “No orphan intents / orphan facts”
  - **Intent:** Detect partial commits.
  - **Evidence:** Periodic scan for missing provenance / missing linkage.

#### III.2 No Partial Reality

- **TITAN-RUNTIME-III02 (VETO Hard):** “Single authoritative representation”
  - **Intent:** Prevent competing authoritative stores.
  - **Evidence:** Writes to prohibited secondary sources are blocked.

---

### Article IV — Architectural Integrity

#### IV.1 High-Integrity Modulith

- **TITAN-LINT-IV01 (VETO Hard):** “No internal service calls for core domains”
  - **Intent:** Stop microservice reintroduction.
  - **Evidence:** Disallow HTTP/RPC clients inside core write-path packages.

#### IV.2 One Runtime (Doctrinal)

- **TITAN-LINT-IV02 (VETO Hard):** “No network hop inside authoritative write
  path”
  - **Intent:** Preserve single truth boundary.
  - **Evidence:** Static analysis flags network calls in write-path modules.

#### IV.3 One Database (Doctrinal)

- **TITAN-CI-IV03 (VETO Hard):** “No second authoritative store for same truth”
  - **Intent:** Prevent distributed state.
  - **Evidence:** Schema registry declares authoritative tables; CI blocks new
    ‘authoritative’ duplicates.

#### IV.4 Boundary Enforcement

- **TITAN-LINT-IV04 (VETO Hard):** “No cross-boundary imports / direct table
  access”
  - **Intent:** Enforce domain contract boundaries.
  - **Evidence:** Import graph rules + DB access rules.

---

### Article V — Decision Memory and Audit

#### V.1 Decision Memory Mandate

- **TITAN-CI-V01 (VETO Hard):** “Decision Memory fields required”
  - **Intent:** Ensure intent/rationale/alternatives are captured.
  - **Evidence:** Transaction types marked ‘significant’ must include Decision
    Memory schema.

#### V.2 Epistemological Audit

- **TITAN-CI-V02 (VETO Hard):** “Audit requires reasoning context”
  - **Intent:** Prevent ‘delta-only’ logging.
  - **Evidence:** Audit events must include actor, intent, rationale, context.
- **TITAN-AUDIT-V02 (WARN→VETO if repeated):** “Audit completeness score”
  - **Intent:** Detect gradual decay.
  - **Evidence:** Periodic report; repeated failure escalates to veto.

---

### Article VI — Compliance as Variable

#### VI.1 Non-Blocking Principle

- **TITAN-RUNTIME-VI01 (VETO Hard):** “Policy cannot hard-stop legitimate
  actions”
  - **Intent:** Replace block with record + justification.
  - **Evidence:** Hard-block only allowed for physical impossibility; otherwise
    requires recorded deviation.

#### VI.2 Accountability Preservation

- **TITAN-CI-VI02 (VETO Hard):** “Deviation must be visible + attributable”
  - **Intent:** Ensure accountability.
  - **Evidence:** Deviation flag includes actor identity + justification.

---

### Article VII — Business Intent Layer

#### VII.1 Semantic Authority

- **TITAN-CI-VII01 (VETO Hard):** “Business rules must be registered in semantic
  layer”
  - **Intent:** Prevent UI-only or code-only hidden rules.
  - **Evidence:** Rule changes require semantic registry entry.

#### VII.2 Evolvability

- **TITAN-LINT-VII02 (VETO Soft):** “Prefer semantic change over UI rewrite”
  - **Intent:** Encourage correct change path.
  - **Evidence:** PR includes semantic update; if UI-only change, requires
    justification.

---

### Article VIII — Scope of Prohibition

- **TITAN-LINT-VIII (VETO Soft):** “No tech/vendor/perf/UI framework in
  Constitution text”
  - **Intent:** Keep Constitution timeless.
  - **Evidence:** Text scan over constitutional documents.

---

### Article IX — Amendment and Governance

#### IX.1 Amendment Exclusivity

- **TITAN-CI-IX01 (VETO Hard):** “Constitution edits require Amendment ID”
  - **Intent:** Prevent silent edits.
  - **Evidence:** PR touching constitution files must reference Amendment ID.

#### IX.2 Non-Retroactivity

- **TITAN-CI-IX02 (VETO Hard):** “No clause rewriting; additive-only”
  - **Intent:** Prevent history rewrite.
  - **Evidence:** Diff classifier blocks edits inside existing clause blocks.

---

## 4. Minimal Integration Points (Workflow)

### 4.1 Developer Workflow

- Local: LINT gates run pre-commit.
- PR: CI gates execute on every push.
- Merge: Merge blocked on any VETO.
- Release: Runtime/Audit gates enforce operationally.

### 4.2 AXIS Workflow

- PRDs must include:
  - Accounting Truth Citation
  - Decision Memory requirements
  - Compliance posture
- AXIS teams receive gate feedback early via templates.

### 4.3 Titan Workflow

- Titan implements:
  - Import graph enforcement
  - Schema requirements
  - Text contamination checks
  - Runtime validators
  - Audit scans

---

## 5. MVP Defaults Annex (v1.0 Ratification Baseline)

This Annex resolves the Open Items required for Titan Protocol v1.0 ratification
using a **conservative MVP set**. These defaults may be expanded later via
additive amendments.

### 5.1 Significant Transaction Types (Decision Memory REQUIRED)

Titan SHALL require Decision Memory (intent, rationale, alternatives when
applicable, risk posture) for the following **significant transaction types**:

1. **Financial Postings**

- Journal entries
- Accruals
- Reversals

2. **Contract Approvals**

- Vendor agreements
- Customer agreements

3. **Compliance Overrides**

- Any policy bypass / deviation

4. **High-Value Purchase Orders**

- Purchase orders exceeding a monetary threshold
- **Threshold Definition:** The numeric threshold SHALL be defined by **AXIS**
  as a product-level configuration (non-constitutional) and referenced by Titan
  at enforcement time.

### 5.2 Core Write-Path Modules (One Runtime Checks APPLY)

Titan SHALL treat the following modules as **core authoritative write-path** and
SHALL apply One Runtime (no internal network hops) and anti-fragmentation
checks:

- `accounting-core/`
- `compliance-core/`
- `audit-core/`

### 5.3 Constitutional Text Locations (Scope-of-Prohibition Scanning)

Titan SHALL scan the following paths as **constitutional text** and SHALL
enforce Article VIII prohibitions (no tech/vendor/perf/UI framework
contamination):

- `/constitution/`
- `/governance/`
- `/amendments/`

### 5.4 Expansion Policy

- Expansions to 5.1–5.3 SHALL be additive.
- Any change MUST be recorded in the Public Ledger per Amendment A-000.

---

**End of Titan Protocol v1.0 (Ratified)**
